# Proposal: close-mpm-requirements

## 背景
- 《designs and requirements.pdf》中的 V2.2 需求/设计仍有缺口：自动微分覆盖（Maxwell/体粘性）、验证场景齐备度、能量/曲线输出、稳定性检查默认化。
- 现状：前向求解器与能量记账完整；Manual Adjoint 仅支持纯 Ogden 并默认严格阻断 Maxwell/体粘性；验证场景仅有少量 demo；部分输出/后处理脚本缺失。

## 目标
在不引入过度复杂度的前提下，补齐上述缺口，交付可验证的能力与脚本，确保与 V2.2 规格对齐：
- 提供覆盖 FR-5 的验证场景与后处理。
- 默认启用稳定性/步长检查与 Drucker 约束。
- 补齐能量输出（含 ΔE_proj_step/E_proj_cum）与绘图脚本。
- 明确并扩展自动微分支持：在可行范围内支持 Maxwell/体粘性梯度，或提供可验证的降级行为与接口。

## 约束
- 遵循 KISS/YAGNI：先交付最小可验证路径，复杂方案（例如外部 AD）仅在必要时引入。
- 兼容现有配置：新增校验/输出需保持可配置的向后兼容路径（警告优先，阻断仅在存在错误梯度时）。
- 以脚本化验证为出口：新增场景必须附 CSV/图表生成脚本。

## 方案概览
- 验证套件：新增单轴拉伸、纯剪切+客观性、能量守恒/投影收敛、GelSlim/incipient slip、Hertz/收敛测试场景与脚本，CLI 统一入口。
- 稳定性与安全：启动时默认执行 Drucker/时间步约束检查，提供强/弱模式；接触刚度/粘性时间尺度提示。
- 能量输出与后处理：确保 ΔE_proj_step/E_proj_cum、E_viscous_*、切向力/位移曲线写入 CSV，并提供自动绘图脚本。
- 自动微分：扩展 Manual Adjoint 覆盖 Maxwell/体粘性梯度（数值差分 P_total 分支，限定规模），并保持纯 Ogden 快速路径；若超出可行范围，提供明确降级/阻断逻辑与验证脚本。

