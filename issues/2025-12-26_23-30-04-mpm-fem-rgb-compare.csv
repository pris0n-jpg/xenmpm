id,priority,phase,area,title,description,acceptance_criteria,test_mcp,review_initial_requirements,review_regression_requirements,dev_state,review_initial_state,review_regression_state,git_state,owner,refs,notes
"MPMFEMRGB-000","P0","1","both","固化对比基线与运行清单","固化一套可复现的 mpm_fem_rgb_compare 运行参数与输出结构，避免对比漂移。","提供基线运行命令与输出目录规范；同机连续运行 2 次产出一致的 total_frames（约 86 帧）与阶段分段；输出中包含参数清单（含隐含默认）与 frame_id→阶段映射。","AUTOE2E","不改变现有 demo 默认行为；运行清单必须覆盖 indenter/摩擦/marker/tint/record_interval 等关键默认与生效值；输出路径稳定、可追溯。","跑 python quick_test.py；用基线命令跑一次对比并确认输出结构、帧数与关键日志不漂移。","已完成","已完成","已完成","已提交","","plan/2025-12-26_23-16-41-mpm-fem-rgb-compare.md:1;Report.md:1;example/mpm_fem_rgb_compare.py:130;example/mpm_fem_rgb_compare.py:1461","picked_reason:P0 基线任务，先固化可复现参数/输出，避免后续对齐工作跑偏;done_at:2025-12-26T23:48:22.5955894+08:00;validation_limited:当前环境缺少 Taichi/ezgl，无法运行完整可视化对比；quick_test.py 不存在;manual_test:python example/mpm_fem_rgb_compare.py --mode raw --record-interval 5 --save-dir output/rgb_compare/baseline;evidence:py_compile ok; --help ok; _write_run_manifest smoke ok (output/_manifest_smoke/run_manifest.json);risk:low 仅新增 record-interval 与 run_manifest 输出，不改变默认行为"
"MPMFEMRGB-010","P0","2","both","校验并可控化 FEM 压头 STL 朝向","验证 circle_r4.STL 实际接触面（tip vs 15mm 方形底座），并提供最小开关/修正确保 tip 端面朝向硅胶/相机。","在指定对比帧输出接触轮廓尺寸统计：外接尺度约 8mm（±1mm），不出现 15mm 方形底座尺度；提供开关可稳定复现/消除“方框轮廓”用于验证。","AUTOE2E","避免引入新大体积资产；若调整朝向/姿态需在日志打印最终朝向与对象位姿；确保默认行为变更有明确说明与回滚路径。","用基线命令跑一次对比并核对 FEM 侧轮廓（无方框或可由开关控制）；确保输出帧数与其他对齐项不受影响。","已完成","已完成","已完成","已提交","","plan/2025-12-26_23-16-41-mpm-fem-rgb-compare.md:1;Report.md:1;example/mpm_fem_rgb_compare.py:443","picked_reason:P0 基于 020 的固定变换链，增加可控的 tip/base 朝向开关并输出 STL 端面尺寸统计，用于复现/消除方框轮廓;done_at:2025-12-27T00:24:35.1525320+08:00;validation_limited:缺少 ezgl/xensesdk 运行环境，无法跑真实深度渲染验证“方框轮廓”消失，仅完成 STL 端面尺寸统计与 tip/base 朝向开关实现;manual_test:python example/mpm_fem_rgb_compare.py --mode raw --fem-indenter-face base --save-dir output/rgb_compare/fem_base ; python example/mpm_fem_rgb_compare.py --mode raw --fem-indenter-face tip --save-dir output/rgb_compare/fem_tip （对比方框轮廓与 run_manifest.json 中 endfaces_mm）;evidence:circle_r4.STL endfaces_mm y_min≈15mm, y_max≈8mm（本机解析通过）; py_compile ok; --help ok;risk:medium 变更依赖 Matrix4x4.rotate/translate 的乘法语义，需在完整环境目视确认 tip/base 切换效果"
"MPMFEMRGB-020","P0","3","both","稳定 DepthRenderScene 变换链（避免覆盖）","修正 FEM 渲染侧固定变换与每帧位姿的合成路径，避免构造期 rotate/translate 被 setTransform 覆盖导致位姿漂移。","同一帧相同输入 set_object_pose 得到一致的世界变换（无隐式累积/覆盖）；日志可打印“固定变换 + 每帧 pose → 最终世界变换”的单一路径结果。","AUTOE2E","变换组合逻辑集中在单一入口；避免多处重复叠加旋转/平移；必要时增加断言/日志辅助定位。","跑基线对比并抽查若干帧：压头位姿变化连续、可解释；无新增异常日志；quick_test.py 通过。","已完成","已完成","已完成","已提交","","plan/2025-12-26_23-16-41-mpm-fem-rgb-compare.md:1;Report.md:1;example/mpm_fem_rgb_compare.py:438;example/mpm_fem_rgb_compare.py:470;xensesdk/xensesdk/ezgl/GLGraphicsItem.py:191","picked_reason:P0 先稳定 set_object_pose 变换链，避免固定 rotate/translate 被覆盖，为 010 朝向验证与后续对齐提供可靠基线;done_at:2025-12-27T00:17:36.7743307+08:00;validation_limited:当前环境缺少 xensesdk 运行依赖（h5py）且 ezgl/taichi 不可用，无法跑真实渲染链路验证 setTransform/矩阵乘法顺序;manual_test:python example/mpm_fem_rgb_compare.py --mode raw --debug --save-dir output/rgb_compare/transform_debug （观察 [DepthRenderScene] raw/fixed/final 日志在同帧输入下稳定一致）;evidence:py_compile ok; --help ok;risk:medium 变更影响 FEM 侧对象变换合成路径，需在完整环境回归确认"
"MPMFEMRGB-030","P0","4","both","统一 MPM/FEM 压头几何与尺寸","让 MPM 物理压头与 FEM 渲染/接触压头使用同一几何定义与尺寸来源，恢复可对比基线。","启动日志打印两侧 indenter_type 与尺寸（mm）并一致；同帧压头 overlay/接触轮廓形状一致（不再出现 box vs STL 的基线差异）。","AUTOE2E","参数入口清晰（CLI/配置），不隐藏默认；保持向后兼容或提供明确迁移提示；避免引入额外资产依赖。","用基线命令跑完整对比，确认两侧压头配置一致且无运行错误；输出对比图/日志可审计。","已完成","已完成","已完成","已提交","","plan/2025-12-26_23-16-41-mpm-fem-rgb-compare.md:1;Report.md:1;example/mpm_fem_rgb_compare.py:1207;example/mpm_fem_rgb_compare.py:1628;example/mpm_fem_rgb_compare.py:443","picked_reason:P0 默认 box 场景下 MPM/FEM 压头几何不一致是最大基线问题，优先让 FEM 跟随 MPM 使用同类几何（box/sphere）并统一尺寸来源;done_at:2025-12-27T00:36:44.4999403+08:00;validation_limited:当前环境缺少 ezgl/taichi，无法跑完整对比验证“同帧轮廓一致”，仅完成 FEM 几何自动跟随 MPM（box/sphere）与尺寸日志/manifest 落盘;manual_test:python example/mpm_fem_rgb_compare.py --mode raw --indenter-type box --fem-indenter-geom auto --save-dir output/rgb_compare/geom_box ; （可选）--mpm-show-indenter 对比两侧轮廓是否一致;evidence:本机运行 main 配置输出显示 MPM indenter type=box 且 FEM indenter geom=box；py_compile ok; --help ok;risk:medium 默认 FEM 几何从 STL 切换为 auto->box（当未指定 --object-file 时），需在完整环境确认对比基线改善且无副作用"
"MPMFEMRGB-040","P1","5","both","对齐摩擦参数并显式化配置","对齐 FEM fric_coef 与 MPM mu_s/mu_k（至少数量级一致），并将对齐值作为显式配置，避免默认值漂移。","提供单一配置/CLI 可同时控制两侧摩擦并在日志打印最终值；文档记录一套“对齐默认值/基线值”；基线对比运行时日志显示两侧摩擦已对齐。","AUTOSERVER","明确摩擦参数定义与映射关系（静/动/单一系数）；对旧参数保持兼容或显式报错；避免静默改变默认。","跑 python quick_test.py；跑一次基线对比并确认摩擦打印一致；必要时抽查滑移阶段表现未被摩擦量级差异主导。","未开始","未开始","未开始","未提交","","plan/2025-12-26_23-16-41-mpm-fem-rgb-compare.md:1;Report.md:1;xengym/fem/simulation.py:233;example/mpm_fem_rgb_compare.py:1229",""
"MPMFEMRGB-050","P0","6","both","统一滑移正方向与坐标变换（清理取反）","把 dx_slide 的符号约定集中到单一坐标变换函数，清理散落在物理/渲染/overlay 的补丁式取反，并输出同帧 pose 对照日志。","代码 review 可确认“方向翻转”只在单一入口处理；运行对比时导出同帧 pose 日志：MPM obstacle_centers[1].x 与 FEM set_object_pose.x 同方向单调变化；对齐后不再出现“强边缘在相反侧”的方向性错误。","AUTOE2E","坐标变换必须集中、可测试、可读；避免物理与渲染层重复翻转；增加必要日志/断言便于定位。","跑基线对比并检查 pose 对照日志；抽查若干帧截图/overlay 方向一致；quick_test.py 通过。","未开始","未开始","未开始","未提交","","plan/2025-12-26_23-16-41-mpm-fem-rgb-compare.md:1;Report.md:1;example/mpm_fem_rgb_compare.py:1363;example/mpm_fem_rgb_compare.py:1035;example/mpm_fem_rgb_compare.py:1555",""
"MPMFEMRGB-060","P1","7","both","渲染策略对齐（tint/marker/尺度）","对齐或开关化 MPM depth tint 与 marker 语义，并核对投影尺度一致性，避免渲染策略放大观感差异。","提供开关可关闭/开启 depth tint 且日志记录生效值；marker 模式可选与 FEM 语义更接近的模式（如 warp）；输出记录 gel_size_mm 与 cam_view_width/height 并证明比例一致（或明确差异原因）。","AUTOE2E","默认不改变现有表现（除非明确）；开关命名清晰、文档可查；避免在渲染链路引入额外不可控状态。","在 tint=off 且 marker 对齐条件下跑一次基线对比；输出图不再出现由 tint 放大的“大块发黑/发红”（或被开关控制）；quick_test.py 通过。","未开始","未开始","未开始","未提交","","plan/2025-12-26_23-16-41-mpm-fem-rgb-compare.md:1;Report.md:1;example/mpm_fem_rgb_compare.py:987;example/mpm_fem_rgb_compare.py:1632;example/mpm_fem_rgb_compare.py:153",""
"MPMFEMRGB-070","P2","8","both","导出中间产物与差异指标（归因）","在一次对比运行中同时导出 MPM/FEM 可对齐的中间结果与差异统计，形成可审计的归因证据。","输出目录包含可对齐的中间产物（height_field/uv_disp/contact_mask 或近似）与指标文件（metrics.json/csv，含 MAE/峰值/分位数等）；指标计算可重复且与 frame_id 对齐。","AUTOSERVER","输出格式与命名稳定；默认避免生成过大数据（提供抽样/压缩/开关）；确保路径与文件句柄管理正确。","跑一次基线对比并确认产物齐全且可解析；quick_test.py 通过；必要时用简单脚本复算指标验证一致性。","未开始","未开始","未开始","未提交","","plan/2025-12-26_23-16-41-mpm-fem-rgb-compare.md:1;Report.md:1;example/mpm_fem_rgb_compare.py:1049",""
"MPMFEMRGB-080","P2","9","both","增加回归测试与文档沉淀","补充轻量回归脚本/测试与文档，固化几何/摩擦/坐标/渲染对齐后的关键不变量，防止未来回退。","新增/更新 quick_test.py 或 example/test_*.py 覆盖关键不变量（几何类型/尺寸、摩擦、坐标方向、渲染开关）；文档包含推荐基线命令与排查步骤；本机运行测试通过。","AUTOSERVER","测试应为 smoke 级（运行快、失败信息清晰）；文档与代码保持一致；避免引入不必要依赖。","跑 python quick_test.py 并确保通过；用推荐基线命令跑一次对比，确认测试与文档描述一致。","未开始","未开始","未开始","未提交","","plan/2025-12-26_23-16-41-mpm-fem-rgb-compare.md:1;quick_test.py:1;Report.md:1",""
